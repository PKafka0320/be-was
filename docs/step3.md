## 1. 학습 목표

- HTTP Response 에 대해 학습한다.
- MIME 타입에 대해 이해하고 이를 적용할 수 있다.

---

## 2. 기능 요구사항

- 지금까지 구현한 소스 코드는 stylesheet 와 파비콘 등을 지원하지 못하고 있다. 
  다양한 컨텐츠 타입을 지원하도록 개선해 본다.

---

## 3. 학습 내용

### 1. HTTP Response

- Start Line
  > '상태 줄(status line)' 이라고 불리며, 다음과 같은 정보를 가지고 있습니다.
  > - HTTP 버전 : 보통 HTTP/1.1 입니다.
  > - 상태 코드 : 요청의 성공 여부를 나타냅니다.
  > - 상태 텍스트 : 상태 코드에 대한 짧은 설명문입니다.

- HTTP Headers
  > 부가적인 정보를 나타내며, 상태 줄에 포함되지 않은 서버에 대한 추가 정보를 제공합니다.
  > - Response 헤더 : 상태 줄에 포함되지 않은 서버에 대한 추가 정보를 제공합니다.
  > - General 헤더 : 메시지 전체에 적용되는 헤더입니다.
  > - Representation 헤더 : 메시지 데이터의 원래 형식과 적용된 인코딩을 설명합니다.

- Body
  > 본문은 응답의 마지막 부분에 들어가며, 모든 응답에 본문이 들어가지는 않습니다.

### 2. Accept Header

- 개요
  > MIME 타입으로 표현되는, 클라이언트가 이해 가능한 컨텐츠 타입이 무엇인지를 알려줍니다.
  > 
  > 컨텐츠 협상을 이용해, 서버는 제안 중 하나를 선택하고 사용하며 Content-Type 응답 헤더로 클라이언트에게 선택된 타입을 알려줍니다. 
  > 브라우저는 요청이 이루어진 컨텍스트에 따라 해당 헤더에 대해 적당한 값들을 설정합니다.

- 와일드카드 : `*/*`
  > 클라이언트가 모든 미디어 타입을 수용할 수 있다는 것을 의미합니다.
  > 
  > 서버는 클라이언트의 요청에 가장 적합한 미디어 타입을 선택해야 하며,
  > 이로 인해 서버가 알맞지 않은 미디어 타입으로 응답할 가능성이 있습니다.
  > 
  > 따라서 클라이언트는 Accept 헤더에 특정한 미디어 타입을 나열하여 요청을 보내거나,
  > 미디어 타입에 대한 우선순위를 명시하기 위해 q 매개변수를 사용할 수 있습니다.

- q-인자 가중치 : `;q=`
  > 사용되는 모든 값들은 weight라고 부르는 상대적인 품질 값을 사용하여 표현되는 선호 순서로 대체됩니다.
  >
  > 가중치는 0에서 1사이의 값으로 지정되며, 최대 3자리의 소수점까지 나타낼 수 있습니다.
  > <br>숫자가 가장 높은 값이 제일 높은 우선순위를 나타내며 존재하지 않는 경우, 기본값은 1입니다.

### 3. MIME Type

- 정의
  > Multipurpose Internet Mail Extensions
  > 
  > 문서, 파일 또는 바이트 집합의 성격과 형식을 나타냅니다.

- 구조 : `type/subtype`
  > MIME 타입은 가장 일반적으로 슬래시(/)로 구분된 'type'과 'subtype'의 두 부분으로 구성됩니다.
  > 또한 이 사이에는 공백이 없습니다.
  > 
  > - type : video 또는 text와 같이 데이터 타입이 속하는 일반 카테고리를 나타냅니다.
  > - subtype : MIME 타입이 나타내는 지정된 타입의 정확한 데이터 종류를 식별합니다.

- 매개변수 : `;parameter=value`
  > 세부정보를 제공하기 위해 선택적 매개변수를 추가할 수 있습니다.
  > 
  > MIME 타입은 대소문자를 구분하지는 않지만 전통적으로 소문자로 쓰여집니다. 
  > 매개변수 값은 대소문자를 구분할 수 있습니다.

- 주의점
  > 브라우저는 MIME 타입을 사용하여 URL 처리 방법을 결정합니다. 
  > 따라서, 웹 서버가 응답의 Content-Type 헤더에 올바른 MIME 타입을 보내는 것이 중요합니다.
  > 
  > 올바르게 구성하지 않으면, 브라우저가 파일 내용을 잘못 해석할 가능성이 높고, 
  > 사이트가 제대로 작동하지 않고 다운로드한 파일이 잘못 처리될 수 있습니다.

---

## 4. 문제 해결

### 1. 타입이 불일치해도 정상 작동하는 현상

- 문제
  > 파비콘을 text/html 형식으로 보내도 정상적으로 불러오는 현상을 발견했습니다.

- 원인
  > 브라우저는 일부 Content-Type이 정확하지 않아도 자동으로 처리할 수 있기 때문에,
  > 이미지 파일이지만 "text/html"로 Content-Type을 설정하여 보내도 브라우저가 이를 인식하고 표시할 수 있습니다.

- 해결 방안
  > 권장되는 방법이 아니기 때문에 "image/x-icon"으로 보내도록 했습니다.

---

## 5. 기록

[Step 1 / MIME Type](http/MIME-type.md)

---

## 6. 참고 문서

[MDN - Accept](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept)

[MDN - MIME Types](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types)

[MDN - Quality Values](https://developer.mozilla.org/en-US/docs/Glossary/Quality_values)
